<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Camera Manager - IP Camera NVR</title>
    <link rel="stylesheet" href="css/manager.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Camera Management</h1>
            <button id="addCameraBtn" class="btn-primary">+ Add Camera</button>
        </header>

        <div id="cameraList" class="camera-list">
            <!-- Camera cards will be dynamically added here -->
        </div>

        <!-- Add/Edit Camera Modal -->
        <div id="cameraModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="modalTitle">Add Camera</h2>
                    <span class="close">&times;</span>
                </div>
                <div class="modal-body">
                    <form id="cameraForm">
                        <input type="hidden" id="cameraId" name="cameraId">

                        <div class="form-group">
                            <label for="cameraName">Camera Name *</label>
                            <input type="text" id="cameraName" name="cameraName" placeholder="e.g., Front Door" required>
                        </div>

                        <div class="form-group">
                            <label>Connection Type</label>
                            <div class="radio-group">
                                <label>
                                    <input type="radio" name="connectionType" value="manual" checked>
                                    Manual Configuration
                                </label>
                                <label>
                                    <input type="radio" name="connectionType" value="auto">
                                    Auto Discovery (Scan Network)
                                </label>
                            </div>
                        </div>

                        <div id="manualConfig">
                            <div class="form-group">
                                <label for="cameraIp">IP Address *</label>
                                <input type="text" id="cameraIp" name="cameraIp" placeholder="192.168.1.100" pattern="^(?:[0-9]{1,3}\.){3}[0-9]{1,3}$">
                            </div>

                            <div class="form-group">
                                <label for="cameraPort">Port</label>
                                <input type="number" id="cameraPort" name="cameraPort" placeholder="554" value="554">
                            </div>

                            <div class="form-group">
                                <label for="cameraUsername">Username</label>
                                <input type="text" id="cameraUsername" name="cameraUsername" placeholder="admin">
                            </div>

                            <div class="form-group">
                                <label for="cameraPassword">Password</label>
                                <input type="password" id="cameraPassword" name="cameraPassword" placeholder="********">
                            </div>

                            <div class="form-group">
                                <label for="rtspPath">RTSP Path</label>
                                <input type="text" id="rtspPath" name="rtspPath" placeholder="/stream1 or /h264/ch1/main/av_stream" value="/stream1">
                                <small>Common paths: /stream1, /h264/ch1/main/av_stream, /live/ch00_0, /Streaming/Channels/101</small>
                            </div>

                            <div class="form-group">
                                <label for="manufacturer">Camera Manufacturer (Optional)</label>
                                <select id="manufacturer" name="manufacturer">
                                    <option value="">Select manufacturer...</option>
                                    <option value="hikvision">Hikvision</option>
                                    <option value="dahua">Dahua</option>
                                    <option value="axis">Axis</option>
                                    <option value="reolink">Reolink</option>
                                    <option value="amcrest">Amcrest</option>
                                    <option value="foscam">Foscam</option>
                                    <option value="vivotek">Vivotek</option>
                                    <option value="generic">Generic/Other</option>
                                </select>
                                <small>Selecting manufacturer auto-fills common RTSP path</small>
                            </div>
                        </div>

                        <div id="autoConfig" style="display: none;">
                            <div class="form-group">
                                <label>Network Range</label>
                                <input type="text" id="networkRange" name="networkRange" placeholder="192.168.1.1-254">
                                <button type="button" id="scanBtn" class="btn-secondary">Scan Network</button>
                            </div>
                            <div id="scanResults" class="scan-results">
                                <!-- Scan results will appear here -->
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="button" id="testBtn" class="btn-secondary">Test Connection</button>
                            <button type="submit" class="btn-primary">Save Camera</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="js/storage.js"></script>
    <script src="js/manager.js"></script>
</body>
</html>
